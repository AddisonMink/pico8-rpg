pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
#include util.lua
#include menu.lua
#include menu_tree.lua
#include dialogue.lua
#include global_state.lua

function _init()
  dialogue = shop_dialogue_new(4, global.shop_items)
end

function _update()
  if result then return end
  result = dialogue:update()
  if result ~= "cancel" then result = nil end
end

function _draw()
  cls()
  if result then return end
  dialogue:draw(8, 8)
end

__gfx__
00000000006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000007777700000000000000000000000efff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007007777000000000000000000000000fefff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770007776000000000000000bb0880000eeffff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700000000000070000033333b8000000b33ffb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070000000000007000003eee33000000bb333bbf440000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000700000ffef330000bb32222fff44000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000070060fffee0004fff2444444444000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000760b3333e000444444a44a4420000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000642bbbbf4400024444a9442220000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000600424433440002222444222220000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000033b3000002222222222220000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000fb44b300002222222222220000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000fffbb33f0002222222222200000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000ff03b0ff0000022222220000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000004440000440000000022000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000c5cc7ccc5ccccc5c00000000000600000000000088800000000bb000000bb00000000000000bb000000bb000000bb0000000000000000000
0000000000000000555bb7cc5ccbcc5c06660000070660000000000802880000033bb800033bb8000b0000000083330000833300008333000000000000000000
00000000000000005555bbc555cbc55577766000007766000a0000002882800000e3330000e3330000b0000b00bbbb0000bbbb0000bbbb000000000000000000
0000000000000000353bbb5555bb75550777699000777699aaa000888888828000ffee0000ffee00000000b000eeee0000eeee0000eeee000000044444444444
000000000000000033b55b73535bb555007799f00007799f0a40000cc86d6c0000b33e0000b33e00000b00b000beeb0000beeb0000beeb000000047444444444
000000000000000053bbbb5333bb53530000b30000000b300004cc82dddcc0dd00b4300000bb4000000b0000002b3200004b3000000b34000000047477747774
00000000000000003b55bbb5535bb335000b30f00000b30f0000d8882cdcc28d000bb000000bb0000b0b00000003300000233000000332000000047474747474
0000000000000000bbbbbbb5bb55b7330ff0f000000f06000000d4288222288000404000000400000b0000000040040000400400004004000000044444444444
0000000000000000555b5b555bbbbb57000f006600f00f000000004288888cd0000bb000000bb000000bb0000028880000000700000000000000004002888800
000000000000000053334533bbbb5bb30000000660000000000000004444ccc00003380000033800000338000288828000500b000b7000000822822828882880
000000000000000033534333555bbbb30000077769900000000000088824ccd0003ee300003ee300003ee300082288800050bb70bbb700b02282222282288888
00000000000000003333433bbbb5bb5b0007777799f00000000000d88808dd0000effe0000effe0000effe00822222280555bb70bbbb00b00666666682222288
0000000000000000333343b33334333300000000b3000000000000ddd000000000bbbb0000bbb400004bbb002717717205553bb00bbb05bb0661661627177178
000000000000000033533333b33433b30000000b30f000000000000555555000004b3400002b3000000b3200044644405553bbb70040055b0555655554464440
00000000000000003333b333333433330000000f60000000000000555555550000033000004330000003340007616470555b33bb040000400565555656615660
0000000000000000b333333b3b333b330000000f0f00000000000005555550000040040000400400004004000661666000200200044000000000000005616560
0000000000000000000000000000800000000000000000000000003000000000000000000000000000000000000000000000000000007777000000000b000030
00000000000000000000bbb000002000000b70000000cc0000000030000000000000000000000000000000000000dd000000000000000070000000000eb00320
00000000000000000000000000088200000bb00000000cc0000000300000000000000000000000000ddd0000000deed00000dd000000070000b000000eebbb30
0000000000000000bb0000000082588000bbb70000000ccc00000030000000000000000000000ddddeeed000000deed0000deed000007777000b0000bbeb8b80
00000000000444440000000000251520003bbb000000cc44400003000000000ddd0000000000deedee7eed000000dd00000deed007770000000b00003ebbbbbb
000000000004464400000000000616000bbb33b0000044ccccc00300000000deeed00000000deeedeee7ed00000000ddd000dd0000700000003b000bb333b7e7
0000000000447774000bbb000006560003bbb3b000ccccee00000300000000deeed00000000de7eedeeeed0000000de7ed0000000777000003b0000b3ee00bb0
000000000404764400000000000666000b33bbb00000077670000300000000ee7eed0000000de7eeeeded0000000deeeeed00000000000000bb000bbef000000
00282888800477740666000000616160bbb33bbb0000cc777c0cf00000000edee7edd000000deeeedeeddd000000deededed0000000000000bb000bbfef30000
0288822828444674777669900066666000024000000ccc777cccf0000000de7deeded00000dedeede7edeed00000de7edeed0000000000000bbbb00bbfe30000
0822888888047774077799f0000555000004240000fcc5777ccc30000000deeee7eed00000deeddeeede7ed000000deede7d00000000000000bbbbbbbef30000
82228282228446440000b300002222200042240000fc44c7000c300000000dddeeeed00000de7eedede7eed000dd00dd0dd00000000000000bb33bbb3feb0000
2717747717244444000b30f00882582802556640000c5ccc4003000000000000dddd0000000deeededeeed000deed000000dd00000000000bb00bbb3eebb0000
044544444400000000f0600000665650255216620005ccc54c03000000000000000000000000dddd00ddd0000deed00000deed0000000000b00bb003303bb000
05515656560000000f00f0000055156025211146000ccc555c0300000000000000000000000000000000000000dd000000deed0000000000bb0bb00000033b00
065155656500000000000000006515602521112600044400444300000000000000000000000000000000000000000000000dd000000000000b707b70000007b7
00000000088800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000677000008888000000000000
00000000820080000000050000000000000000000000000000000000000000000000000000000000000000000000000000000000666700088820000000000000
00000000888000000000555000000000000000000000000000000000000000000000000000000000000000000000000000000000666700b88888000000000000
000000dd8ddd00000000050000000000000bb0880000000000bb088000000000000000bb0880000000000000000000bb08800000446000bb8737000000000000
00000001d717000006660500070000033333b80000000033333b8000000000000033333b80000000000000000033333b80000000004bb00333bb033000000000
00000000d1ddd00006560000007000003eee330000000003eee33000000000000003eee330000000000000000003eee3300000000003bb42b3bb033000000000
000000087dd10d0006560000000700000ffef33000000000ffef3300000000007777777f33000000000000000000ffef3300000000034b442222400000000000
000000dd17dd000006660000000070060fffee0000000000ff6ee400077777777777fffee0000000000000060000fffee0000000000004244444b30000000000
00000000177700000000000000000760b3333e000000000b3363e400000000060000b3333e000000000000060000b3333e00000000000002222bbb0000000000
0000000d007707000000000000000642bbbbf44000077777776440007777777644f3bbbbf44000007777777644f3bbbbf440000000000044422bb30000000000
000000000007700000000000000060042443344000000000446440000000000644ff3443344000000000000644ff344334400000000003444043300000000000
00000000000000000000000000000000033b30000000000033630000000000060000033b30000000000000060000033b30000000000003330000000000000000
00000000000000000000000000000000fb44b3000000000fb44b30000000000000ffbb44b3f000000000000000ffbb44b3f00000000000000000000000000000
0000000000000000000000000000000fffbb33f00000000ffbb33f000000000000fff3bb3fff00000000000000fff3bb3fff0000000000555555000000000000
0000000000000000000000000000000ff03b0ff00000000ff3b0ff0000000000000ff03b00fff00000000000000ff03b00fff000000005555555500000000000
00000000000000000000000000000044400004400000000440004440000000000044400000044000000000000044400000044000000000555555000000000000
0000000000000066000000000000000000000000d66000f0d660f000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000006660000000000000000000000000ddd6000ffd6f0000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000666000000000000000000000000000ddd6008ddddd0000088888000000000000000000000000000000000000000000000000000000000000000000
000000006660000000000000000000000000000066d00088d7570000000888880000000000000000000000000000000000000000000000000000000000000000
0000000676000000000000006000000000000000006dd00222880550000089888000000000000000888888000000000000000000000000000000000000000000
00000067600000000000006600000000000000000005dd6582880550000008998880000000000088888880000000000000000000000000000000000000000000
000006760000000000000660000000000000000000056d665555d000000008999888000000000888898800000000000000000000000000000000000000000000
000067600000000000006760000000000000060000000656666d8200000089979988800000008888998000000000000000000000000000000000000000000000
00067760000000000006760000000000000060000000000555588800000089977998800000088889998000000000888888000000000000000000000000000000
00677600000000000067600000000000000660000000006665588200000889977999880000088899799800000000008888800000000000000000000000000000
0777600000000000067760000000000000670000000002dd60d22000008899777999980000888897799888000000000898888000000000000000000000000000
77776000000000000777600000000000077600000000022200000000088997777799980000888997799988800000008899988800000000000000000000000000
77770000000000000776000000000000077000000000000000000000089977777779980000889977779998800000888997998880000000000000000000000000
77770000000000000770000000000000000000000000005555550000009977777779980000899777779998800008889977799880000000000000000000000000
77700000000000000000000000000000000000000000055555555000000997777779900000899777779988800008899777799880000000000000000000000000
07000000000000000000000000000000000000000000005555550000000997777799000000089977799980000008899777799880000000000000000000000000
